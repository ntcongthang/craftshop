var tbLoaderVars,themifyBuilder,themifyBuilderCommon;(function($,window,document,undefined){"use strict";$(document).ready(function(){var $tbContent=$(".themify_builder_content");if($tbContent.length>0){$tbContent.after('<a class="themify_builder_turn_on" href="#"><span class="dashicons dashicons-edit"></span>'+tbLoaderVars.turnOnBuilder+"</a>")}$("#wp--wrap").remove();$("body").on("click.tbloader",".toggle_tf_builder a:first, a.themify_builder_turn_on",function(e){e.preventDefault();$(".themify_builder_front_icon").parent().append($(tbLoaderVars.progress));var jqxhr=$.post(tbLoaderVars.ajaxurl,{action:"themify_builder_loader",scripts:tbLoaderVars.assets.scripts,styles:tbLoaderVars.assets.styles});jqxhr.fail(function(){window.console&&console.log("AJAX failed")});jqxhr.done(function(response){response=$.parseJSON(response);if(!response){return}var countStyles=0,countScripts=0;if(response.styles){countStyles=response.styles.length-1;$(response.styles).each(function(){tbLoaderVars.assets.styles.push(this.handle);var style=document.createElement("link");style.rel="stylesheet";style.href=this.src;style.id=this.handle+"-css";style.async=false;style.onload=function(){if(0===countStyles){$("body").trigger("builderstylesloaded.themify")}countStyles--};style.onerror=function(){countStyles--};if(style){document.getElementsByTagName("head")[0].appendChild(style)}})}if(response.scripts){countScripts=response.scripts.length-1;$(response.scripts).each(function(){var elementToAppendTo=this.footer?"body":"head";tbLoaderVars.assets.scripts.push(this.handle);if(this.jsVars){var data=document.createElement("script"),dataContent=document.createTextNode("//<![CDATA[ \n"+this.jsVars+"\n//]]>");data.type="text/javascript";data.appendChild(dataContent);document.getElementsByTagName(elementToAppendTo)[0].appendChild(data)}var script=document.createElement("script");script.type="text/javascript";script.src=this.src;script.id=this.handle;script.async=false;script.onload=function(){if(0===countScripts){if(themifyBuilder){themifyBuilder.post_ID=tbLoaderVars.post_ID}$("body").off("click.tbloader");$("body").trigger("builderscriptsloaded.themify")}countScripts--};script.onerror=function(){countScripts--};document.getElementsByTagName(elementToAppendTo)[0].appendChild(script)})}})});if(window.location.hash==="#builder_active"){if($(".toggle_tf_builder a:first").length>0){$(".toggle_tf_builder a:first").trigger("click")}else if($(".themify_builder_turn_on").length>0){$(".themify_builder_turn_on").first().trigger("click")}}})})(jQuery,window,document);